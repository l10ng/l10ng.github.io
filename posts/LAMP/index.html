<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>LAMP在Centos6.8下的編譯安裝與設置 | l10ng's</title><meta name="description" content="LAMP在Centos6.8下的編譯安裝與設置"><meta name="keywords" content="linux,lamp,centos"><meta name="author" content="l10ng"><meta name="copyright" content="l10ng"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/l10ng/image@1.0/favicon.png"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="LAMP在Centos6.8下的編譯安裝與設置"><meta name="twitter:description" content="LAMP在Centos6.8下的編譯安裝與設置"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/l10ng/image@1.0/cover_default2.jpg"><meta property="og:type" content="article"><meta property="og:title" content="LAMP在Centos6.8下的編譯安裝與設置"><meta property="og:url" content="https://l10ng.github.io/posts/LAMP/"><meta property="og:site_name" content="l10ng's"><meta property="og:description" content="LAMP在Centos6.8下的編譯安裝與設置"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/l10ng/image@1.0/cover_default2.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://l10ng.github.io/posts/LAMP/"><link rel="prev" title="mimikatz找回windows密碼的幾種常用方式" href="https://l10ng.github.io/posts/mimikatz-usage/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">l10ng's</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 日誌</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 關於</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音樂</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/l10ng/image@1.0/avatar.jpeg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/l10ng/image@1.0/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">3</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">9</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">2</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 日誌</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 關於</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音樂</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#gt-LAMP-以下"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">&gt; LAMP 以下</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#apache-httpd"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text">apache-httpd</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#mysql"><span class="toc_mobile_items-number">1.1.2.</span> <span class="toc_mobile_items-text">mysql</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#bin-mysql-–initialize-–user-mysql-–datadir-mydata-data-–basedir-usr-local-mysql"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">bin&#x2F;mysql –initialize –user&#x3D;mysql –datadir&#x3D;&#x2F;mydata&#x2F;data –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cat-root-mysql-secret"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">cat &#x2F;root&#x2F;.mysql_secret</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#mysql-uroot-p"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">mysql -uroot -p</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#mysql-uroot-p-e-“SHOW-DATABASES-”-grep-Evi-“database-information-performance”-sed-r-‘s-a-z-mysqldump-uroot-p”dldkshja”-B-1-gzip-gt-root-1-sql-gz-g’-bash-amp-gt-dev-null"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">mysql -uroot -p -e “SHOW DATABASES;” | grep -Evi “database|information|performance” | sed -r ‘s@^([a-z].*$)@mysqldump -uroot -p”dldkshja” -B \1 | gzip &gt; &#x2F;root&#x2F;\1.sql.gz@g’ | bash &amp;&gt; &#x2F;dev&#x2F;null</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#groupadd-g-306-mysql"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">groupadd -g 306 mysql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#useradd-g-306-u-306-r-s-sbin-nologin-M-mysql"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">useradd -g 306 -u 306 -r -s &#x2F;sbin&#x2F;nologin -M mysql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#mkdir-mydata-3306-3307-data-pv"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">mkdir &#x2F;mydata&#x2F;{3306,3307}&#x2F;data -pv</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#chown-R-mysql-mysql-mydata"><span class="toc_mobile_items-number">9.</span> <span class="toc_mobile_items-text">chown -R mysql.mysql &#x2F;mydata&#x2F;</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#wget-http-dev-mysql-com-get-Downloads-MySQL-5-7-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz"><span class="toc_mobile_items-number">10.</span> <span class="toc_mobile_items-text">wget http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-5.7&#x2F;mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#tar-xf-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz-C-usr-local"><span class="toc_mobile_items-number">11.</span> <span class="toc_mobile_items-text">tar xf mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz -C &#x2F;usr&#x2F;local</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cd-usr-local"><span class="toc_mobile_items-number">12.</span> <span class="toc_mobile_items-text">cd &#x2F;usr&#x2F;local</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ln-sv-mysql-5-7-15-linux-glibc2-5-x86-64-mysql"><span class="toc_mobile_items-number">13.</span> <span class="toc_mobile_items-text">ln -sv mysql-5.7.15-linux-glibc2.5-x86_64 mysql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cd-mysql"><span class="toc_mobile_items-number">14.</span> <span class="toc_mobile_items-text">cd mysql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#chmod-R-mysql-mysql"><span class="toc_mobile_items-number">15.</span> <span class="toc_mobile_items-text">chmod -R mysql.mysql .&#x2F;*</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-etc-profile-d-mysqld-sh"><span class="toc_mobile_items-number">16.</span> <span class="toc_mobile_items-text">vim &#x2F;etc&#x2F;profile.d&#x2F;mysqld.sh</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#source-etc-profile-d-mysqld-sh"><span class="toc_mobile_items-number">17.</span> <span class="toc_mobile_items-text">source &#x2F;etc&#x2F;profile.d&#x2F;mysqld.sh</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-etc-ld-so-conf-d-mysqld-conf"><span class="toc_mobile_items-number">18.</span> <span class="toc_mobile_items-text">vim &#x2F;etc&#x2F;ld.so.conf.d&#x2F;mysqld.conf</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ldconfig"><span class="toc_mobile_items-number">19.</span> <span class="toc_mobile_items-text">ldconfig</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ldconfig-p-grep-mysql"><span class="toc_mobile_items-number">20.</span> <span class="toc_mobile_items-text">ldconfig -p | grep mysql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-etc-man-config"><span class="toc_mobile_items-number">21.</span> <span class="toc_mobile_items-text">vim &#x2F;etc&#x2F;man.config</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ls-sv-usr-local-mysql-include-usr-include-mysqld"><span class="toc_mobile_items-number">22.</span> <span class="toc_mobile_items-text">ls -sv &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;include &#x2F;usr&#x2F;include&#x2F;mysqld</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-mydata-3306-mysqld"><span class="toc_mobile_items-number">23.</span> <span class="toc_mobile_items-text">vim &#x2F;mydata&#x2F;3306&#x2F;mysqld</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#chkconfig-345-43-57"><span class="toc_mobile_items-number">24.</span> <span class="toc_mobile_items-text">chkconfig: 345 43 57</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#description-mysqld-master"><span class="toc_mobile_items-number">25.</span> <span class="toc_mobile_items-text">description: mysqld-master</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-mydata-3306-my-cnf"><span class="toc_mobile_items-number">26.</span> <span class="toc_mobile_items-text">vim &#x2F;mydata&#x2F;3306&#x2F;my.cnf</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#以下为BINLOG"><span class="toc_mobile_items-number">27.</span> <span class="toc_mobile_items-text">以下为BINLOG</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#以下为慢查询LOG"><span class="toc_mobile_items-number">28.</span> <span class="toc_mobile_items-text">以下为慢查询LOG</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#以下为普通查询日志和错误日志，错误日志在-mysqld-safe-内"><span class="toc_mobile_items-number">29.</span> <span class="toc_mobile_items-text">以下为普通查询日志和错误日志，错误日志在[mysqld_safe]内</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#以下为查询缓存"><span class="toc_mobile_items-number">30.</span> <span class="toc_mobile_items-text">以下为查询缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#skip-name-resolve"><span class="toc_mobile_items-number">31.</span> <span class="toc_mobile_items-text">skip-name-resolve</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#replicate-ignore-db-mysql-从库忽略的数据库名"><span class="toc_mobile_items-number">32.</span> <span class="toc_mobile_items-text">replicate-ignore-db                 &#x3D; mysql # 从库忽略的数据库名</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#table-cache-614"><span class="toc_mobile_items-number">33.</span> <span class="toc_mobile_items-text">table_cache                       &#x3D; 614</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#innodb-additional-mem-pool-size-4M"><span class="toc_mobile_items-number">34.</span> <span class="toc_mobile_items-text">innodb_additional_mem_pool_size     &#x3D; 4M</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#innodb-file-io-threads-4"><span class="toc_mobile_items-number">35.</span> <span class="toc_mobile_items-text">innodb_file_io_threads            &#x3D; 4</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cd-usr-local-mysql"><span class="toc_mobile_items-number">36.</span> <span class="toc_mobile_items-text">cd &#x2F;usr&#x2F;local&#x2F;mysql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3306-data"><span class="toc_mobile_items-number">37.</span> <span class="toc_mobile_items-text">bin&#x2F;mysqld –initialize –user&#x3D;mysql –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –datadir&#x3D;&#x2F;mydata&#x2F;3306&#x2F;data</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3307-data"><span class="toc_mobile_items-number">38.</span> <span class="toc_mobile_items-text">bin&#x2F;mysqld –initialize –user&#x3D;mysql –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –datadir&#x3D;&#x2F;mydata&#x2F;3307&#x2F;data</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#mydata-3306-3307-mysqld-start"><span class="toc_mobile_items-number">39.</span> <span class="toc_mobile_items-text">&#x2F;mydata&#x2F;{3306,3307}&#x2F;mysqld start</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#netstat-tnulp-grep-330"><span class="toc_mobile_items-number">40.</span> <span class="toc_mobile_items-text">netstat -tnulp | grep 330</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#mysql-uroot-p初始化的密码-S-mydata-3306-mysql-sock"><span class="toc_mobile_items-number">41.</span> <span class="toc_mobile_items-text">mysql -uroot -p初始化的密码 -S &#x2F;mydata&#x2F;3306&#x2F;mysql.sock</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#mysql-uroot-p初始化的密码-S-mydata-3307-mysql-sock"><span class="toc_mobile_items-number">42.</span> <span class="toc_mobile_items-text">mysql -uroot -p初始化的密码 -S &#x2F;mydata&#x2F;3307&#x2F;mysql.sock</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#wget-http-cn2-php-net-distributions-php-5-6-26-tar-gz"><span class="toc_mobile_items-number">43.</span> <span class="toc_mobile_items-text">wget http:&#x2F;&#x2F;cn2.php.net&#x2F;distributions&#x2F;php-5.6.26.tar.gz</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#tar-xf-php-5-6-26-tar-gz"><span class="toc_mobile_items-number">44.</span> <span class="toc_mobile_items-text">tar xf php-5.6.26.tar.gz</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cd-php-5-6-26"><span class="toc_mobile_items-number">45.</span> <span class="toc_mobile_items-text">cd php-5.6.26</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#make-amp-amp-make-install"><span class="toc_mobile_items-number">46.</span> <span class="toc_mobile_items-text">make &amp;&amp; make install</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#mkdir-etc-php-d"><span class="toc_mobile_items-number">47.</span> <span class="toc_mobile_items-text">mkdir &#x2F;etc&#x2F;php.d</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-etc-profile-d-php-fpm-sh"><span class="toc_mobile_items-number">48.</span> <span class="toc_mobile_items-text">vim &#x2F;etc&#x2F;profile.d&#x2F;php-fpm.sh</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#source-etc-profile-d-php-fpm-sh"><span class="toc_mobile_items-number">49.</span> <span class="toc_mobile_items-text">source &#x2F;etc&#x2F;profile.d&#x2F;php-fpm.sh</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-etc-ld-so-conf-d-php-fpm-conf"><span class="toc_mobile_items-number">50.</span> <span class="toc_mobile_items-text">vim &#x2F;etc&#x2F;ld.so.conf.d&#x2F;php-fpm.conf</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ldconfig-1"><span class="toc_mobile_items-number">51.</span> <span class="toc_mobile_items-text">ldconfig</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ldconfig-p-grep-php"><span class="toc_mobile_items-number">52.</span> <span class="toc_mobile_items-text">ldconfig -p | grep php</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-etc-man-config-1"><span class="toc_mobile_items-number">53.</span> <span class="toc_mobile_items-text">vim &#x2F;etc&#x2F;man.config</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ln-sv-usr-local-php-include-usr-include-php"><span class="toc_mobile_items-number">54.</span> <span class="toc_mobile_items-text">ln -sv &#x2F;usr&#x2F;local&#x2F;php&#x2F;include &#x2F;usr&#x2F;include&#x2F;php</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cp-php-ini-producation-etc-php-ini"><span class="toc_mobile_items-number">55.</span> <span class="toc_mobile_items-text">cp php.ini-producation &#x2F;etc&#x2F;php.ini</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cp-sapi-fpm-init-d-php-fpm-etc-init-d-php-fpm"><span class="toc_mobile_items-number">56.</span> <span class="toc_mobile_items-text">cp sapi&#x2F;fpm&#x2F;init.d.php-fpm &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#chmod-x-etc-init-d-php-fpm"><span class="toc_mobile_items-number">57.</span> <span class="toc_mobile_items-text">chmod +x &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#chkconfig-–add-php-fpm"><span class="toc_mobile_items-number">58.</span> <span class="toc_mobile_items-text">chkconfig –add php-fpm</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cd-usr-local-php"><span class="toc_mobile_items-number">59.</span> <span class="toc_mobile_items-text">cd &#x2F;usr&#x2F;local&#x2F;php&#x2F;</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cp-etc-php-fpm-conf-default-etc-php-fpm-conf"><span class="toc_mobile_items-number">60.</span> <span class="toc_mobile_items-text">cp etc&#x2F;php-fpm.conf.default etc&#x2F;php-fpm.conf</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-etc-php-fpm-conf"><span class="toc_mobile_items-number">61.</span> <span class="toc_mobile_items-text">vim etc&#x2F;php-fpm.conf</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#server-php-fpm-start"><span class="toc_mobile_items-number">62.</span> <span class="toc_mobile_items-text">server php-fpm start</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#vim-www-html-index-php"><span class="toc_mobile_items-number">63.</span> <span class="toc_mobile_items-text">vim &#x2F;www&#x2F;html&#x2F;index.php</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#wget-http-xcache-lighttpd-net-pub-Releases-3-2-0-xcache-3-2-0-tar-gz"><span class="toc_mobile_items-number">64.</span> <span class="toc_mobile_items-text">wget http:&#x2F;&#x2F;xcache.lighttpd.net&#x2F;pub&#x2F;Releases&#x2F;3.2.0&#x2F;xcache-3.2.0.tar.gz</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#tar-xf-xcache-3-2-0-tar-gz"><span class="toc_mobile_items-number">65.</span> <span class="toc_mobile_items-text">tar xf xcache-3.2.0.tar.gz</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cd-xcache-3-2-0"><span class="toc_mobile_items-number">66.</span> <span class="toc_mobile_items-text">cd xcache-3.2.0</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#phpize"><span class="toc_mobile_items-number">67.</span> <span class="toc_mobile_items-text">phpize</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#configure-–with-php-config-usr-local-php-bin-php-config-–enable-xcache"><span class="toc_mobile_items-number">68.</span> <span class="toc_mobile_items-text">.&#x2F;configure –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config –enable-xcache</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#cp-xcache-ini-etc-php-d"><span class="toc_mobile_items-number">69.</span> <span class="toc_mobile_items-text">cp xcache.ini &#x2F;etc&#x2F;php.d</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#service-php-fpm-restart"><span class="toc_mobile_items-number">70.</span> <span class="toc_mobile_items-text">service php-fpm restart</span></a></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#gt-LAMP-以下"><span class="toc-number">1.</span> <span class="toc-text">&gt; LAMP 以下</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓"><span class="toc-number">1.1.</span> <span class="toc-text">↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#apache-httpd"><span class="toc-number">1.1.1.</span> <span class="toc-text">apache-httpd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql"><span class="toc-number">1.1.2.</span> <span class="toc-text">mysql</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bin-mysql-–initialize-–user-mysql-–datadir-mydata-data-–basedir-usr-local-mysql"><span class="toc-number">2.</span> <span class="toc-text">bin&#x2F;mysql –initialize –user&#x3D;mysql –datadir&#x3D;&#x2F;mydata&#x2F;data –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cat-root-mysql-secret"><span class="toc-number">3.</span> <span class="toc-text">cat &#x2F;root&#x2F;.mysql_secret</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-uroot-p"><span class="toc-number">4.</span> <span class="toc-text">mysql -uroot -p</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-uroot-p-e-“SHOW-DATABASES-”-grep-Evi-“database-information-performance”-sed-r-‘s-a-z-mysqldump-uroot-p”dldkshja”-B-1-gzip-gt-root-1-sql-gz-g’-bash-amp-gt-dev-null"><span class="toc-number">5.</span> <span class="toc-text">mysql -uroot -p -e “SHOW DATABASES;” | grep -Evi “database|information|performance” | sed -r ‘s@^([a-z].*$)@mysqldump -uroot -p”dldkshja” -B \1 | gzip &gt; &#x2F;root&#x2F;\1.sql.gz@g’ | bash &amp;&gt; &#x2F;dev&#x2F;null</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#groupadd-g-306-mysql"><span class="toc-number">6.</span> <span class="toc-text">groupadd -g 306 mysql</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#useradd-g-306-u-306-r-s-sbin-nologin-M-mysql"><span class="toc-number">7.</span> <span class="toc-text">useradd -g 306 -u 306 -r -s &#x2F;sbin&#x2F;nologin -M mysql</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mkdir-mydata-3306-3307-data-pv"><span class="toc-number">8.</span> <span class="toc-text">mkdir &#x2F;mydata&#x2F;{3306,3307}&#x2F;data -pv</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chown-R-mysql-mysql-mydata"><span class="toc-number">9.</span> <span class="toc-text">chown -R mysql.mysql &#x2F;mydata&#x2F;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wget-http-dev-mysql-com-get-Downloads-MySQL-5-7-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz"><span class="toc-number">10.</span> <span class="toc-text">wget http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;MySQL-5.7&#x2F;mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tar-xf-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz-C-usr-local"><span class="toc-number">11.</span> <span class="toc-text">tar xf mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz -C &#x2F;usr&#x2F;local</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cd-usr-local"><span class="toc-number">12.</span> <span class="toc-text">cd &#x2F;usr&#x2F;local</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ln-sv-mysql-5-7-15-linux-glibc2-5-x86-64-mysql"><span class="toc-number">13.</span> <span class="toc-text">ln -sv mysql-5.7.15-linux-glibc2.5-x86_64 mysql</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cd-mysql"><span class="toc-number">14.</span> <span class="toc-text">cd mysql</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chmod-R-mysql-mysql"><span class="toc-number">15.</span> <span class="toc-text">chmod -R mysql.mysql .&#x2F;*</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-etc-profile-d-mysqld-sh"><span class="toc-number">16.</span> <span class="toc-text">vim &#x2F;etc&#x2F;profile.d&#x2F;mysqld.sh</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#source-etc-profile-d-mysqld-sh"><span class="toc-number">17.</span> <span class="toc-text">source &#x2F;etc&#x2F;profile.d&#x2F;mysqld.sh</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-etc-ld-so-conf-d-mysqld-conf"><span class="toc-number">18.</span> <span class="toc-text">vim &#x2F;etc&#x2F;ld.so.conf.d&#x2F;mysqld.conf</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ldconfig"><span class="toc-number">19.</span> <span class="toc-text">ldconfig</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ldconfig-p-grep-mysql"><span class="toc-number">20.</span> <span class="toc-text">ldconfig -p | grep mysql</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-etc-man-config"><span class="toc-number">21.</span> <span class="toc-text">vim &#x2F;etc&#x2F;man.config</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ls-sv-usr-local-mysql-include-usr-include-mysqld"><span class="toc-number">22.</span> <span class="toc-text">ls -sv &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;include &#x2F;usr&#x2F;include&#x2F;mysqld</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-mydata-3306-mysqld"><span class="toc-number">23.</span> <span class="toc-text">vim &#x2F;mydata&#x2F;3306&#x2F;mysqld</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chkconfig-345-43-57"><span class="toc-number">24.</span> <span class="toc-text">chkconfig: 345 43 57</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#description-mysqld-master"><span class="toc-number">25.</span> <span class="toc-text">description: mysqld-master</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-mydata-3306-my-cnf"><span class="toc-number">26.</span> <span class="toc-text">vim &#x2F;mydata&#x2F;3306&#x2F;my.cnf</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#以下为BINLOG"><span class="toc-number">27.</span> <span class="toc-text">以下为BINLOG</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#以下为慢查询LOG"><span class="toc-number">28.</span> <span class="toc-text">以下为慢查询LOG</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#以下为普通查询日志和错误日志，错误日志在-mysqld-safe-内"><span class="toc-number">29.</span> <span class="toc-text">以下为普通查询日志和错误日志，错误日志在[mysqld_safe]内</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#以下为查询缓存"><span class="toc-number">30.</span> <span class="toc-text">以下为查询缓存</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#skip-name-resolve"><span class="toc-number">31.</span> <span class="toc-text">skip-name-resolve</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#replicate-ignore-db-mysql-从库忽略的数据库名"><span class="toc-number">32.</span> <span class="toc-text">replicate-ignore-db                 &#x3D; mysql # 从库忽略的数据库名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#table-cache-614"><span class="toc-number">33.</span> <span class="toc-text">table_cache                       &#x3D; 614</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#innodb-additional-mem-pool-size-4M"><span class="toc-number">34.</span> <span class="toc-text">innodb_additional_mem_pool_size     &#x3D; 4M</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#innodb-file-io-threads-4"><span class="toc-number">35.</span> <span class="toc-text">innodb_file_io_threads            &#x3D; 4</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cd-usr-local-mysql"><span class="toc-number">36.</span> <span class="toc-text">cd &#x2F;usr&#x2F;local&#x2F;mysql</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3306-data"><span class="toc-number">37.</span> <span class="toc-text">bin&#x2F;mysqld –initialize –user&#x3D;mysql –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –datadir&#x3D;&#x2F;mydata&#x2F;3306&#x2F;data</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3307-data"><span class="toc-number">38.</span> <span class="toc-text">bin&#x2F;mysqld –initialize –user&#x3D;mysql –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –datadir&#x3D;&#x2F;mydata&#x2F;3307&#x2F;data</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mydata-3306-3307-mysqld-start"><span class="toc-number">39.</span> <span class="toc-text">&#x2F;mydata&#x2F;{3306,3307}&#x2F;mysqld start</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#netstat-tnulp-grep-330"><span class="toc-number">40.</span> <span class="toc-text">netstat -tnulp | grep 330</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-uroot-p初始化的密码-S-mydata-3306-mysql-sock"><span class="toc-number">41.</span> <span class="toc-text">mysql -uroot -p初始化的密码 -S &#x2F;mydata&#x2F;3306&#x2F;mysql.sock</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-uroot-p初始化的密码-S-mydata-3307-mysql-sock"><span class="toc-number">42.</span> <span class="toc-text">mysql -uroot -p初始化的密码 -S &#x2F;mydata&#x2F;3307&#x2F;mysql.sock</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wget-http-cn2-php-net-distributions-php-5-6-26-tar-gz"><span class="toc-number">43.</span> <span class="toc-text">wget http:&#x2F;&#x2F;cn2.php.net&#x2F;distributions&#x2F;php-5.6.26.tar.gz</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tar-xf-php-5-6-26-tar-gz"><span class="toc-number">44.</span> <span class="toc-text">tar xf php-5.6.26.tar.gz</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cd-php-5-6-26"><span class="toc-number">45.</span> <span class="toc-text">cd php-5.6.26</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#make-amp-amp-make-install"><span class="toc-number">46.</span> <span class="toc-text">make &amp;&amp; make install</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mkdir-etc-php-d"><span class="toc-number">47.</span> <span class="toc-text">mkdir &#x2F;etc&#x2F;php.d</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-etc-profile-d-php-fpm-sh"><span class="toc-number">48.</span> <span class="toc-text">vim &#x2F;etc&#x2F;profile.d&#x2F;php-fpm.sh</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#source-etc-profile-d-php-fpm-sh"><span class="toc-number">49.</span> <span class="toc-text">source &#x2F;etc&#x2F;profile.d&#x2F;php-fpm.sh</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-etc-ld-so-conf-d-php-fpm-conf"><span class="toc-number">50.</span> <span class="toc-text">vim &#x2F;etc&#x2F;ld.so.conf.d&#x2F;php-fpm.conf</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ldconfig-1"><span class="toc-number">51.</span> <span class="toc-text">ldconfig</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ldconfig-p-grep-php"><span class="toc-number">52.</span> <span class="toc-text">ldconfig -p | grep php</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-etc-man-config-1"><span class="toc-number">53.</span> <span class="toc-text">vim &#x2F;etc&#x2F;man.config</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ln-sv-usr-local-php-include-usr-include-php"><span class="toc-number">54.</span> <span class="toc-text">ln -sv &#x2F;usr&#x2F;local&#x2F;php&#x2F;include &#x2F;usr&#x2F;include&#x2F;php</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cp-php-ini-producation-etc-php-ini"><span class="toc-number">55.</span> <span class="toc-text">cp php.ini-producation &#x2F;etc&#x2F;php.ini</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cp-sapi-fpm-init-d-php-fpm-etc-init-d-php-fpm"><span class="toc-number">56.</span> <span class="toc-text">cp sapi&#x2F;fpm&#x2F;init.d.php-fpm &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chmod-x-etc-init-d-php-fpm"><span class="toc-number">57.</span> <span class="toc-text">chmod +x &#x2F;etc&#x2F;init.d&#x2F;php-fpm</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chkconfig-–add-php-fpm"><span class="toc-number">58.</span> <span class="toc-text">chkconfig –add php-fpm</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cd-usr-local-php"><span class="toc-number">59.</span> <span class="toc-text">cd &#x2F;usr&#x2F;local&#x2F;php&#x2F;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cp-etc-php-fpm-conf-default-etc-php-fpm-conf"><span class="toc-number">60.</span> <span class="toc-text">cp etc&#x2F;php-fpm.conf.default etc&#x2F;php-fpm.conf</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-etc-php-fpm-conf"><span class="toc-number">61.</span> <span class="toc-text">vim etc&#x2F;php-fpm.conf</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#server-php-fpm-start"><span class="toc-number">62.</span> <span class="toc-text">server php-fpm start</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vim-www-html-index-php"><span class="toc-number">63.</span> <span class="toc-text">vim &#x2F;www&#x2F;html&#x2F;index.php</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wget-http-xcache-lighttpd-net-pub-Releases-3-2-0-xcache-3-2-0-tar-gz"><span class="toc-number">64.</span> <span class="toc-text">wget http:&#x2F;&#x2F;xcache.lighttpd.net&#x2F;pub&#x2F;Releases&#x2F;3.2.0&#x2F;xcache-3.2.0.tar.gz</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tar-xf-xcache-3-2-0-tar-gz"><span class="toc-number">65.</span> <span class="toc-text">tar xf xcache-3.2.0.tar.gz</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cd-xcache-3-2-0"><span class="toc-number">66.</span> <span class="toc-text">cd xcache-3.2.0</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#phpize"><span class="toc-number">67.</span> <span class="toc-text">phpize</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#configure-–with-php-config-usr-local-php-bin-php-config-–enable-xcache"><span class="toc-number">68.</span> <span class="toc-text">.&#x2F;configure –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config –enable-xcache</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cp-xcache-ini-etc-php-d"><span class="toc-number">69.</span> <span class="toc-text">cp xcache.ini &#x2F;etc&#x2F;php.d</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#service-php-fpm-restart"><span class="toc-number">70.</span> <span class="toc-text">service php-fpm restart</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/l10ng/image@1.0/cover_default2.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">LAMP在Centos6.8下的編譯安裝與設置</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-02-01<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-02-02</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%81%8B%E7%B6%AD/">運維</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="gt-LAMP-以下"><a href="#gt-LAMP-以下" class="headerlink" title="&gt; LAMP 以下"></a>&gt; LAMP 以下</h1><h2 id="↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓"><a href="#↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓" class="headerlink" title="↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓"></a>↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</h2><h3 id="apache-httpd"><a href="#apache-httpd" class="headerlink" title="apache-httpd"></a>apache-httpd</h3><hr>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; apr环境</span><br><span class="line"><span class="comment"># wget http://mirrors.cnnic.cn/apache//apr/apr-1.5.2.tar.gz</span></span><br><span class="line"><span class="comment"># wget http://mirrors.cnnic.cn/apache//apr/apr-util-1.5.4.tar.gz</span></span><br><span class="line"><span class="comment"># tar xf apr-1.5.2.tar.gz</span></span><br><span class="line"><span class="comment"># cd apr-1.5.2</span></span><br><span class="line"><span class="comment"># ./configure --prefix=/usr/local/apr</span></span><br><span class="line"><span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># tar xf apr-util-1.5.4.tar.gz</span></span><br><span class="line"><span class="comment"># cd apr-util-1.5.4</span></span><br><span class="line"><span class="comment"># ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr</span></span><br><span class="line"><span class="comment"># make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>httpd安装</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://mirror.bit.edu.cn/apache//httpd/httpd-2.4.23.tar.gz</span></span><br><span class="line"><span class="comment"># tar xf httpd-2.4.23.tar.gz</span></span><br><span class="line"><span class="comment"># cd httpd-2.4.23</span></span><br><span class="line">./configure \</span><br><span class="line">--prefix=/usr/<span class="built_in">local</span>/httpd \</span><br><span class="line">--sysconfdir=/etc \</span><br><span class="line">--with-apr=/usr/<span class="built_in">local</span>/apr \</span><br><span class="line">--with-apr-util=/usr/<span class="built_in">local</span>/apr-util \</span><br><span class="line">--with-pcre \</span><br><span class="line">--with-mpm=event \ 			<span class="comment">#event模型</span></span><br><span class="line">--with-libxml2 \</span><br><span class="line">--with-zib \</span><br><span class="line">--<span class="built_in">enable</span>-ssl \</span><br><span class="line">--<span class="built_in">enable</span>-so \</span><br><span class="line">--<span class="built_in">enable</span>-mbstring \</span><br><span class="line">--<span class="built_in">enable</span>-rewrite \</span><br><span class="line">--<span class="built_in">enable</span>-modules=all \</span><br><span class="line">--<span class="built_in">enable</span>-mods-shared=all \</span><br><span class="line">--<span class="built_in">enable</span>-mpms-shared=all \</span><br><span class="line">--<span class="built_in">enable</span>-cgid \ 				<span class="comment">#event模型中使用cgid</span></span><br><span class="line">--<span class="built_in">enable</span>-proxy \				<span class="comment">#开启代理支持</span></span><br><span class="line">--<span class="built_in">enable</span>-proxy-fcgi				<span class="comment">#开启代理支持php</span></span><br><span class="line"></span><br><span class="line">--<span class="built_in">enable</span>-proxy-http \ 			<span class="comment">#开启代理http，一般代理tomcat和其它http协议</span></span><br><span class="line">--<span class="built_in">enable</span>-proxy-ajp \ 			<span class="comment">#开启apache二进制传输协议，一般代理tomcat</span></span><br><span class="line">--<span class="built_in">enable</span>-proxy-balancer \ 		<span class="comment">#开启代理负载均衡</span></span><br><span class="line">--<span class="built_in">enable</span>-lbmethod-heartbeat \	<span class="comment">#开启负载均衡心跳检测，以下为心跳检测功能</span></span><br><span class="line">--<span class="built_in">enable</span>-heartbeat \ 			<span class="comment">#开启心跳检测</span></span><br><span class="line">--<span class="built_in">enable</span>-slotmem-shm \ 			<span class="comment">#</span></span><br><span class="line">--<span class="built_in">enable</span>-slotmem-plain \</span><br><span class="line">--<span class="built_in">enable</span>-watchdog</span><br><span class="line"></span><br><span class="line"><span class="comment"># make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>环境配置</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/profile.d/httpd.sh</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/httpd/bin</span><br><span class="line"><span class="built_in">source</span> /etc/profile.d/httpd.sh</span><br><span class="line">vim /etc/man.config</span><br><span class="line">MAN /usr/<span class="built_in">local</span>/httpd/man</span><br><span class="line"><span class="comment"># ln -sv /usr/local/httpd/include /usr/include/httpd</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/init.d/httpd</span></span><br><span class="line">=========================启动脚本开始========================================</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># httpd        Startup script for the Apache HTTP Server</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># chkconfig: - 85 15</span></span><br><span class="line"><span class="comment"># description: The Apache HTTP Server is an efficient and extensible  \</span></span><br><span class="line"><span class="comment">#              server implementing the current HTTP standards.</span></span><br><span class="line"><span class="comment"># processname: httpd</span></span><br><span class="line"><span class="comment"># config: /etc/httpd/conf/httpd.conf</span></span><br><span class="line"><span class="comment"># config: /etc/sysconfig/httpd</span></span><br><span class="line"><span class="comment"># pidfile: /var/run/httpd/httpd.pid</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">### BEGIN INIT INFO</span></span><br><span class="line"><span class="comment"># Provides: httpd</span></span><br><span class="line"><span class="comment"># Required-Start: $local_fs $remote_fs $network $named</span></span><br><span class="line"><span class="comment"># Required-Stop: $local_fs $remote_fs $network</span></span><br><span class="line"><span class="comment"># Should-Start: distcache</span></span><br><span class="line"><span class="comment"># Short-Description: start and stop Apache HTTP Server</span></span><br><span class="line"><span class="comment"># Description: The Apache HTTP Server is an extensible server </span></span><br><span class="line"><span class="comment">#  implementing the current HTTP standards.</span></span><br><span class="line"><span class="comment">### END INIT INFO</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line">. /etc/rc.d/init.d/<span class="built_in">functions</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -f /etc/sysconfig/httpd ]; <span class="keyword">then</span></span><br><span class="line">        . /etc/sysconfig/httpd</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Start httpd in the C locale by default.</span></span><br><span class="line">HTTPD_LANG=<span class="variable">$&#123;HTTPD_LANG-"C"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This will prevent initlog from swallowing up a pass-phrase prompt if</span></span><br><span class="line"><span class="comment"># mod_ssl needs a pass-phrase from the user.</span></span><br><span class="line">INITLOG_ARGS=<span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set HTTPD=/usr/sbin/httpd.worker in /etc/sysconfig/httpd to use a server</span></span><br><span class="line"><span class="comment"># with the thread-based "worker" MPM; BE WARNED that some modules may not</span></span><br><span class="line"><span class="comment"># work correctly with a thread-based MPM; notably PHP will refuse to start.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Path to the apachectl script, server binary, and short-form for messages.</span></span><br><span class="line">apachectl=/usr/<span class="built_in">local</span>/httpd/bin/apachectl</span><br><span class="line">httpd=<span class="variable">$&#123;HTTPD-/usr/local/httpd/bin/httpd&#125;</span></span><br><span class="line">prog=httpd</span><br><span class="line">pidfile=<span class="variable">$&#123;PIDFILE-/var/run/httpd.pid&#125;</span></span><br><span class="line">lockfile=<span class="variable">$&#123;LOCKFILE-/var/lock/subsys/httpd&#125;</span></span><br><span class="line">RETVAL=0</span><br><span class="line">STOP_TIMEOUT=<span class="variable">$&#123;STOP_TIMEOUT-10&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The semantics of these two functions differ from the way apachectl does</span></span><br><span class="line"><span class="comment"># things -- attempting to start while running is a failure, and shutdown</span></span><br><span class="line"><span class="comment"># when not running is also a failure.  So we just do it the way init scripts</span></span><br><span class="line"><span class="comment"># are expected to behave here.</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>() &#123;</span><br><span class="line">        <span class="built_in">echo</span> -n $<span class="string">"Starting <span class="variable">$prog</span>: "</span></span><br><span class="line">        LANG=<span class="variable">$HTTPD_LANG</span> daemon --pidfile=<span class="variable">$&#123;pidfile&#125;</span> <span class="variable">$httpd</span> <span class="variable">$OPTIONS</span></span><br><span class="line">        RETVAL=$?</span><br><span class="line">        echo_failure</span><br><span class="line">        [ <span class="variable">$RETVAL</span> = 0 ] &amp;&amp; touch <span class="variable">$&#123;lockfile&#125;</span></span><br><span class="line">        <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># When stopping httpd, a delay (of default 10 second) is required</span></span><br><span class="line"><span class="comment"># before SIGKILLing the httpd parent; this gives enough time for the</span></span><br><span class="line"><span class="comment"># httpd parent to SIGKILL any errant children.</span></span><br><span class="line"><span class="function"><span class="title">stop</span></span>() &#123;</span><br><span class="line">        status -p <span class="variable">$&#123;pidfile&#125;</span> <span class="variable">$httpd</span> &gt; /dev/null</span><br><span class="line">        <span class="keyword">if</span> [[ $? = 0 ]]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> -n $<span class="string">"Stopping <span class="variable">$prog</span>: "</span></span><br><span class="line">                killproc -p <span class="variable">$&#123;pidfile&#125;</span> -d <span class="variable">$&#123;STOP_TIMEOUT&#125;</span> <span class="variable">$httpd</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> -n $<span class="string">"Stopping <span class="variable">$prog</span>: "</span></span><br><span class="line">                success</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        RETVAL=$?</span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line">        [ <span class="variable">$RETVAL</span> = 0 ] &amp;&amp; rm -f <span class="variable">$&#123;lockfile&#125;</span> <span class="variable">$&#123;pidfile&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">reload</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Reloading <span class="variable">$prog</span>: "</span></span><br><span class="line">    <span class="keyword">if</span> ! LANG=<span class="variable">$HTTPD_LANG</span> <span class="variable">$httpd</span> <span class="variable">$OPTIONS</span> -t &gt;&amp;/dev/null; <span class="keyword">then</span></span><br><span class="line">        RETVAL=6</span><br><span class="line">        <span class="built_in">echo</span> $<span class="string">"not reloading due to configuration syntax error"</span></span><br><span class="line">        failure $<span class="string">"not reloading <span class="variable">$httpd</span> due to configuration syntax error"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># Force LSB behaviour from killproc</span></span><br><span class="line">        LSB=1 killproc -p <span class="variable">$&#123;pidfile&#125;</span> <span class="variable">$httpd</span> -HUP</span><br><span class="line">        RETVAL=$?</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$RETVAL</span> -eq 7 ]; <span class="keyword">then</span></span><br><span class="line">            failure $<span class="string">"httpd shutdown"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># See how we were called.</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">  start)</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">  stop)</span><br><span class="line">        stop</span><br><span class="line">        ;;</span><br><span class="line">  status)</span><br><span class="line">        status -p <span class="variable">$&#123;pidfile&#125;</span> <span class="variable">$httpd</span></span><br><span class="line">        RETVAL=$?</span><br><span class="line">        ;;</span><br><span class="line">  restart)</span><br><span class="line">        stop</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">  condrestart|try-restart)</span><br><span class="line">        <span class="keyword">if</span> status -p <span class="variable">$&#123;pidfile&#125;</span> <span class="variable">$httpd</span> &gt;&amp;/dev/null; <span class="keyword">then</span></span><br><span class="line">                stop</span><br><span class="line">                start</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        ;;</span><br><span class="line">  force-reload|reload)</span><br><span class="line">        reload</span><br><span class="line">        ;;</span><br><span class="line">  graceful|<span class="built_in">help</span>|configtest|fullstatus)</span><br><span class="line">        <span class="variable">$apachectl</span> <span class="variable">$@</span></span><br><span class="line">        RETVAL=$?</span><br><span class="line">        ;;</span><br><span class="line">  *)</span><br><span class="line">        <span class="built_in">echo</span> $<span class="string">"Usage: <span class="variable">$prog</span> &#123;start|stop|restart|condrestart|try-restart|force-reload|reload|status|fullstatus|graceful|help|configtest&#125;"</span></span><br><span class="line">        RETVAL=2</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$RETVAL</span></span><br><span class="line"></span><br><span class="line">=============================启动脚本结束=========================================================</span><br><span class="line"></span><br><span class="line"><span class="comment"># chmod +x /etc/init.d/httpd</span></span><br><span class="line"><span class="comment"># chkconfig --add httpd</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>配置文件</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/httpd/httpd.conf</span></span><br><span class="line">注释掉: DocumentRoot <span class="string">"/usr/local/httpd/htdocs"</span></span><br><span class="line"></span><br><span class="line">PidFile <span class="string">"/var/run/httpd.pid"</span></span><br><span class="line">Include /etc/httpd/extra/httpd-vhosts.conf</span><br><span class="line">Index index.php index.html index.htm</span><br><span class="line"></span><br><span class="line">vim /etc/httpd/extra/httpd-vhosts.conf</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">	ServerName ha1.yzio.com</span><br><span class="line">	DocumentRoot <span class="string">"/www/html"</span></span><br><span class="line">	proxyrequest off		; 关掉正向代理，启用反向代理</span><br><span class="line">	proxypassmatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9000/www/html/<span class="variable">$1</span></span><br><span class="line">	&lt;directory <span class="string">"/www/html"</span>&gt;</span><br><span class="line">		options none</span><br><span class="line">		AllowOverride none</span><br><span class="line">		required all granted</span><br><span class="line">	&lt;/directory&gt;</span><br><span class="line">	Errorlog <span class="string">"/var/log/ha1.yzio.com_error"</span></span><br><span class="line">	CustomLog <span class="string">"/var/log/ha1.yzio.com_access"</span> common</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure></div>

<h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><hr>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; 工作用户、目录准备</span><br><span class="line"><span class="comment"># groupadd -g 306 mysql</span></span><br><span class="line"><span class="comment"># useradd -g 306 -u 306 -r -s /sbin/nologin -M mysql</span></span><br><span class="line"><span class="comment"># mkdir /mydata/data</span></span><br><span class="line"><span class="comment"># chown -R mysql.mysql /mydata/data</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>通用二进制安装</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz</span></span><br><span class="line"><span class="comment"># tar xf mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz -C /usr/local</span></span><br><span class="line"><span class="comment"># cd /usr/local</span></span><br><span class="line"><span class="comment"># ln -sv mysql-5.7.15-linux-glibc2.5-x86_64 mysql</span></span><br><span class="line"><span class="comment"># cd mysql</span></span><br><span class="line"><span class="comment"># chmod -R mysql.mysql ./*</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>环境准备</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/profile.d/mysqld.sh</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/mysql/bin</span><br><span class="line"><span class="comment"># source /etc/profile.d/mysqld.sh</span></span><br><span class="line"><span class="comment"># vim /etc/ld.so.conf.d/mysqld.conf</span></span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/lib</span><br><span class="line"><span class="comment"># ldconfig</span></span><br><span class="line"><span class="comment"># ldconfig -p | grep mysql</span></span><br><span class="line"><span class="comment"># vim /etc/man.config</span></span><br><span class="line">MAN /usr/<span class="built_in">local</span>/mysql/man</span><br><span class="line"><span class="comment"># ls -sv /usr/local/mysql/include /usr/include/mysqld</span></span><br><span class="line"><span class="comment"># cp support-files/my.cnf-production /etc/my.cnf</span></span><br><span class="line"><span class="comment"># cp support-files/mysql.server /etc/init.d/mysqld</span></span><br><span class="line"><span class="comment"># chmod +x /etc/init.d/mysqld</span></span><br><span class="line"><span class="comment"># chkconfig --add mysqld</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/my.cnf</span></span><br><span class="line">basedir = /usr/<span class="built_in">local</span>/mysql</span><br><span class="line">datadir = /mydata/data</span><br><span class="line">innodb_file_per_table = 1</span><br><span class="line">log_bin = master-bin</span><br><span class="line">log_bin_index = master-bin.index</span><br><span class="line">binlog_format = mixed</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>初始化</p>
</blockquote>
<h1 id="bin-mysql-–initialize-–user-mysql-–datadir-mydata-data-–basedir-usr-local-mysql"><a href="#bin-mysql-–initialize-–user-mysql-–datadir-mydata-data-–basedir-usr-local-mysql" class="headerlink" title="bin/mysql –initialize –user=mysql –datadir=/mydata/data –basedir=/usr/local/mysql"></a>bin/mysql –initialize –user=mysql –datadir=/mydata/data –basedir=/usr/local/mysql</h1><blockquote>
<p>查看密码 在初始化过程回显中，或</p>
</blockquote>
<h1 id="cat-root-mysql-secret"><a href="#cat-root-mysql-secret" class="headerlink" title="cat /root/.mysql_secret"></a>cat /root/.mysql_secret</h1><h1 id="mysql-uroot-p"><a href="#mysql-uroot-p" class="headerlink" title="mysql -uroot -p"></a>mysql -uroot -p</h1><p>输入上面的默认密码<br>mysql&gt; SET PASSWORD = PASSWORD(‘dldkshja’);<br>mysql&gt; SHOW DATABASES;</p>
<blockquote>
<p>全库备份</p>
</blockquote>
<h1 id="mysql-uroot-p-e-“SHOW-DATABASES-”-grep-Evi-“database-information-performance”-sed-r-‘s-a-z-mysqldump-uroot-p”dldkshja”-B-1-gzip-gt-root-1-sql-gz-g’-bash-amp-gt-dev-null"><a href="#mysql-uroot-p-e-“SHOW-DATABASES-”-grep-Evi-“database-information-performance”-sed-r-‘s-a-z-mysqldump-uroot-p”dldkshja”-B-1-gzip-gt-root-1-sql-gz-g’-bash-amp-gt-dev-null" class="headerlink" title="mysql -uroot -p -e “SHOW DATABASES;” | grep -Evi “database|information|performance” | sed -r ‘s@^([a-z].*$)@mysqldump -uroot -p”dldkshja” -B \1 | gzip &gt; /root/\1.sql.gz@g’ | bash &amp;&gt; /dev/null"></a>mysql -uroot -p -e “SHOW DATABASES;” | grep -Evi “database|information|performance” | sed -r ‘s@^([a-z].*$)@mysqldump -uroot -p”dldkshja” -B \1 | gzip &gt; /root/\1.sql.gz@g’ | bash &amp;&gt; /dev/null</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### mysql多实例</span><br></pre></td></tr></table></figure></div>
<blockquote>
<blockquote>
<p>编译安装参数<br>cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql <br>-DMYSQL_DATADIR=/mydata/data <br>-DSYSCONFDIR=/etc -DWITH_SSL=1 <br>-DWITH_INNOBASE_STORAGE_ENGINE=1 <br>-DWITH_ARCHIVE_STORAGE_ENGINE=1 <br>-DWITH_BLACKHOLE_STORAGE_ENGINE=1 <br>-DWITH_READLINE=1 <br>-DWITH_SSL=system <br>-DWITH_ZLIB=system <br>-DWITH_LIBWRAP=0 <br>-DMYSQL_UNIX_ADDR=/tmp/mysql.sock</p>
</blockquote>
</blockquote>
<h1 id="groupadd-g-306-mysql"><a href="#groupadd-g-306-mysql" class="headerlink" title="groupadd -g 306 mysql"></a>groupadd -g 306 mysql</h1><h1 id="useradd-g-306-u-306-r-s-sbin-nologin-M-mysql"><a href="#useradd-g-306-u-306-r-s-sbin-nologin-M-mysql" class="headerlink" title="useradd -g 306 -u 306 -r -s /sbin/nologin -M mysql"></a>useradd -g 306 -u 306 -r -s /sbin/nologin -M mysql</h1><h1 id="mkdir-mydata-3306-3307-data-pv"><a href="#mkdir-mydata-3306-3307-data-pv" class="headerlink" title="mkdir /mydata/{3306,3307}/data -pv"></a>mkdir /mydata/{3306,3307}/data -pv</h1><h1 id="chown-R-mysql-mysql-mydata"><a href="#chown-R-mysql-mysql-mydata" class="headerlink" title="chown -R mysql.mysql /mydata/"></a>chown -R mysql.mysql /mydata/</h1><blockquote>
<p>通用二进制安装</p>
</blockquote>
<h1 id="wget-http-dev-mysql-com-get-Downloads-MySQL-5-7-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz"><a href="#wget-http-dev-mysql-com-get-Downloads-MySQL-5-7-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz" class="headerlink" title="wget http://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz"></a>wget <a href="http://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz" target="_blank" rel="noopener">http://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz</a></h1><h1 id="tar-xf-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz-C-usr-local"><a href="#tar-xf-mysql-5-7-15-linux-glibc2-5-x86-64-tar-gz-C-usr-local" class="headerlink" title="tar xf mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz -C /usr/local"></a>tar xf mysql-5.7.15-linux-glibc2.5-x86_64.tar.gz -C /usr/local</h1><h1 id="cd-usr-local"><a href="#cd-usr-local" class="headerlink" title="cd /usr/local"></a>cd /usr/local</h1><h1 id="ln-sv-mysql-5-7-15-linux-glibc2-5-x86-64-mysql"><a href="#ln-sv-mysql-5-7-15-linux-glibc2-5-x86-64-mysql" class="headerlink" title="ln -sv mysql-5.7.15-linux-glibc2.5-x86_64 mysql"></a>ln -sv mysql-5.7.15-linux-glibc2.5-x86_64 mysql</h1><h1 id="cd-mysql"><a href="#cd-mysql" class="headerlink" title="cd mysql"></a>cd mysql</h1><h1 id="chmod-R-mysql-mysql"><a href="#chmod-R-mysql-mysql" class="headerlink" title="chmod -R mysql.mysql ./*"></a>chmod -R mysql.mysql ./*</h1><blockquote>
<p>环境准备</p>
</blockquote>
<h1 id="vim-etc-profile-d-mysqld-sh"><a href="#vim-etc-profile-d-mysqld-sh" class="headerlink" title="vim /etc/profile.d/mysqld.sh"></a>vim /etc/profile.d/mysqld.sh</h1><p>export PATH=$PATH:/usr/local/mysql/bin</p>
<h1 id="source-etc-profile-d-mysqld-sh"><a href="#source-etc-profile-d-mysqld-sh" class="headerlink" title="source /etc/profile.d/mysqld.sh"></a>source /etc/profile.d/mysqld.sh</h1><h1 id="vim-etc-ld-so-conf-d-mysqld-conf"><a href="#vim-etc-ld-so-conf-d-mysqld-conf" class="headerlink" title="vim /etc/ld.so.conf.d/mysqld.conf"></a>vim /etc/ld.so.conf.d/mysqld.conf</h1><p>/usr/local/mysql/lib</p>
<h1 id="ldconfig"><a href="#ldconfig" class="headerlink" title="ldconfig"></a>ldconfig</h1><h1 id="ldconfig-p-grep-mysql"><a href="#ldconfig-p-grep-mysql" class="headerlink" title="ldconfig -p | grep mysql"></a>ldconfig -p | grep mysql</h1><h1 id="vim-etc-man-config"><a href="#vim-etc-man-config" class="headerlink" title="vim /etc/man.config"></a>vim /etc/man.config</h1><p>MAN /usr/local/mysql/man</p>
<h1 id="ls-sv-usr-local-mysql-include-usr-include-mysqld"><a href="#ls-sv-usr-local-mysql-include-usr-include-mysqld" class="headerlink" title="ls -sv /usr/local/mysql/include /usr/include/mysqld"></a>ls -sv /usr/local/mysql/include /usr/include/mysqld</h1><blockquote>
<blockquote>
<p>配置mysqld启动脚本</p>
</blockquote>
</blockquote>
<h1 id="vim-mydata-3306-mysqld"><a href="#vim-mydata-3306-mysqld" class="headerlink" title="vim /mydata/3306/mysqld"></a>vim /mydata/3306/mysqld</h1><p>#!/bin/bash</p>
<h1 id="chkconfig-345-43-57"><a href="#chkconfig-345-43-57" class="headerlink" title="chkconfig: 345 43 57"></a>chkconfig: 345 43 57</h1><h1 id="description-mysqld-master"><a href="#description-mysqld-master" class="headerlink" title="description: mysqld-master"></a>description: mysqld-master</h1><p>. /etc/init.d/functions<br>port=3306<br>mysql_user=”root”<br>mysql_pwd=”dldkshja”<br>cmdPath=”/usr/local/mysql/bin”<br>mysql_sock=/mydata/${port}/mysql.sock<br>conf_file=/mydata/${port}/my.cnf<br>prog=”MySQL”<br>pid_file=/mydata/${port}/mysql.pid</p>
<p>function start() {<br>        if [ -e “$mysql_sock” ]; then<br>                action “$prog is running…”<br>                exit<br>        else<br>                $cmdPath/mysqld_safe –defaults-file=${conf_file} &amp;&gt; /dev/null &amp;<br>                sleep 5<br>                if [ -e $pid_file ]; then<br>                        action “Starting $prog: “ /bin/true<br>                else<br>                        action “Starting $prog: “ /bin/false<br>                fi</p>
<pre><code>fi</code></pre><p>}</p>
<p>function stop() {<br>        if [ -e “$mysql_sock” ]; then<br>                $cmdPath/mysqladmin -u$mysql_user -p$mysql_pwd -S ${mysql_sock} shutdown &amp;&gt; /dev/null<br>                action “Stopping $prog” /bin/true<br>        else<br>                action “$prog is stopped…”<br>        fi<br>}</p>
<p>case “$1” in<br>        start)<br>                start<br>                ;;<br>        stop)<br>                stop<br>                ;;<br>        restart)<br>                stop<br>                sleep 2<br>                start<br>                ;;<br>        *)</p>
<p>esac</p>
<blockquote>
<blockquote>
<p>配置my.cnf配置文件</p>
</blockquote>
</blockquote>
<h1 id="vim-mydata-3306-my-cnf"><a href="#vim-mydata-3306-my-cnf" class="headerlink" title="vim /mydata/3306/my.cnf"></a>vim /mydata/3306/my.cnf</h1><p>[client]<br>port         = 3306<br>socket         = /mydata/3306/mysql.sock</p>
<p>[mysql]<br>no-auto-rehash</p>
<p>[mysqld]<br>user                                 = mysql<br>port                                 = 3306<br>basedir                             = /usr/local/mysqld<br>datadir                             = /mydata/3306/data<br>socket                                 = /mydata/3306/mysql.sock        # 本地套接字文件<br>pid-file                            = /mydata/3306/mysql.pid         # 守护进程号文件<br>server-id                            = 1                              # 服务序列号<br>character-set-server                = utf8                           # 默认服务字符集</p>
<p>innodb_file_per_table                 = 0                              # 关闭innodb数据库单文件存放在磁盘</p>
<h1 id="以下为BINLOG"><a href="#以下为BINLOG" class="headerlink" title="以下为BINLOG"></a>以下为BINLOG</h1><p>log-bin                                = /mydata/3306/master-bin        # 开启binlog日志<br>log_bin_index                         = master-bin.index               # binlog日志的索引<br>binlog_format                        = mixed                          # binlog记录格式<br>expire_logs_days                    = 7                              # binlog日志保存天数<br>log-slave-updates                                                    # 从库做级联日志<br>binlog_cache_size                   = 1M<br>max_binlog_cache_size               = 1M<br>max_binlog_size                     = 2M</p>
<h1 id="以下为慢查询LOG"><a href="#以下为慢查询LOG" class="headerlink" title="以下为慢查询LOG"></a>以下为慢查询LOG</h1><p>long_query_time                     = 10                             # 最长查询时间，秒<br>slow_query_log                      = OFF                            # 慢查询日志开关<br>slow_query_log_file                 = /mydata/3306/data/mysql1-slow.log  # 慢查询日志路径<br>log_queries_not_using_indexes       = 1                              # 开启记录未使用索引的查询</p>
<h1 id="以下为普通查询日志和错误日志，错误日志在-mysqld-safe-内"><a href="#以下为普通查询日志和错误日志，错误日志在-mysqld-safe-内" class="headerlink" title="以下为普通查询日志和错误日志，错误日志在[mysqld_safe]内"></a>以下为普通查询日志和错误日志，错误日志在[mysqld_safe]内</h1><p>#general_log                        = 0                              # 关闭普通查询日志<br>#general_log_file                   = /mydata/3306/mysql.log         # 普通日志路径<br>#log-error                          = /mydata/3306/error.log         # 错误日志路径</p>
<h1 id="以下为查询缓存"><a href="#以下为查询缓存" class="headerlink" title="以下为查询缓存"></a>以下为查询缓存</h1><p>query_cache_size                    = 2M<br>query_cache_limit                   = 1M<br>query_cache_min_res_unit            = 2k</p>
<p>slave-skip-errors                   = 1032,1062,1007                 # 从库跳过简单错误</p>
<p>innodb_log_buffer_size              = 2M<br>innodb_log_file_size                = 4M<br>innodb_log_files_in_group           = 3<br>innodb_buffer_pool_size             = 32M<br>innodb_data_file_path               = idbata1:128M:autoextend<br>innodb_thread_concurrency           = 8<br>innodb_flush_log_at_trx_commit      = 2<br>innodb_max_dirty_pages_pct          = 90<br>innodb_lock_wait_timeout            = 120</p>
<p>relay-log                             = /mydata/3306/relay-bin         # 从库中继日志<br>relay-log-info-file                 = /mydata/3306/relay-log.info    # 从库中继日志被执行信息日志</p>
<p>read-only                                                            # 设置从库不能写入，读写分离用</p>
<p>open_files_limit                     = 1024<br>back_log                             = 600<br>max_connections                     = 800<br>max_connect_errors                     = 3000</p>
<p>external_locking                     = FALSE<br>max_allowed_packet                     = 8M<br>sort_buffer_size                     = 1M<br>join_buffer_size                     = 1M</p>
<p>thread_cache_size                    = 100<br>thread_concurrency                     = 2<br>thread_stack                         = 192k</p>
<p>tmp_table_size                         = 2M<br>max_heap_table_size                 = 2M</p>
<p>key_buffer_size                     = 16M<br>read_buffer_size                    = 1M<br>bulk_insert_buffer_size             = 1M<br>lower_case_table_names                = 1</p>
<h1 id="skip-name-resolve"><a href="#skip-name-resolve" class="headerlink" title="skip-name-resolve"></a>skip-name-resolve</h1><h1 id="replicate-ignore-db-mysql-从库忽略的数据库名"><a href="#replicate-ignore-db-mysql-从库忽略的数据库名" class="headerlink" title="replicate-ignore-db                 = mysql # 从库忽略的数据库名"></a>replicate-ignore-db                 = mysql # 从库忽略的数据库名</h1><h1 id="table-cache-614"><a href="#table-cache-614" class="headerlink" title="table_cache                       = 614"></a>table_cache                       = 614</h1><h1 id="innodb-additional-mem-pool-size-4M"><a href="#innodb-additional-mem-pool-size-4M" class="headerlink" title="innodb_additional_mem_pool_size     = 4M"></a>innodb_additional_mem_pool_size     = 4M</h1><h1 id="innodb-file-io-threads-4"><a href="#innodb-file-io-threads-4" class="headerlink" title="innodb_file_io_threads            = 4"></a>innodb_file_io_threads            = 4</h1><p>#myisam_sort_buffer_size             = 1M<br>#myisam_max_sort_file_size             = 10G<br>#myisam_max_extra_sort_file_size     = 10G<br>#myisam_repair_treads                 = 1<br>#myisam_recover<br>#default_table_type                 = InnoDB<br>#transaction_isolation                 = READ-COMMITTED<br>#log_long_format</p>
<blockquote>
<blockquote>
<p>以上两个脚本要修改相应的路径</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>初始化数据库</p>
</blockquote>
</blockquote>
<h1 id="cd-usr-local-mysql"><a href="#cd-usr-local-mysql" class="headerlink" title="cd /usr/local/mysql"></a>cd /usr/local/mysql</h1><h1 id="bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3306-data"><a href="#bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3306-data" class="headerlink" title="bin/mysqld –initialize –user=mysql –basedir=/usr/local/mysql –datadir=/mydata/3306/data"></a>bin/mysqld –initialize –user=mysql –basedir=/usr/local/mysql –datadir=/mydata/3306/data</h1><h1 id="bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3307-data"><a href="#bin-mysqld-–initialize-–user-mysql-–basedir-usr-local-mysql-–datadir-mydata-3307-data" class="headerlink" title="bin/mysqld –initialize –user=mysql –basedir=/usr/local/mysql –datadir=/mydata/3307/data"></a>bin/mysqld –initialize –user=mysql –basedir=/usr/local/mysql –datadir=/mydata/3307/data</h1><h1 id="mydata-3306-3307-mysqld-start"><a href="#mydata-3306-3307-mysqld-start" class="headerlink" title="/mydata/{3306,3307}/mysqld start"></a>/mydata/{3306,3307}/mysqld start</h1><h1 id="netstat-tnulp-grep-330"><a href="#netstat-tnulp-grep-330" class="headerlink" title="netstat -tnulp | grep 330"></a>netstat -tnulp | grep 330</h1><p>tcp        0      0 :::3306                     :::*                        LISTEN      10184/mysqld<br>tcp        0      0 :::3307                     :::*                        LISTEN      9911/mysqld </p>
<h1 id="mysql-uroot-p初始化的密码-S-mydata-3306-mysql-sock"><a href="#mysql-uroot-p初始化的密码-S-mydata-3306-mysql-sock" class="headerlink" title="mysql -uroot -p初始化的密码 -S /mydata/3306/mysql.sock"></a>mysql -uroot -p初始化的密码 -S /mydata/3306/mysql.sock</h1><p>mysql&gt; set password = password(‘dldkshja’)</p>
<h1 id="mysql-uroot-p初始化的密码-S-mydata-3307-mysql-sock"><a href="#mysql-uroot-p初始化的密码-S-mydata-3307-mysql-sock" class="headerlink" title="mysql -uroot -p初始化的密码 -S /mydata/3307/mysql.sock"></a>mysql -uroot -p初始化的密码 -S /mydata/3307/mysql.sock</h1><p>mysql&gt; set password = password(‘dldkshja’)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### php</span><br><span class="line">---</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>编译</p>
</blockquote>
<h1 id="wget-http-cn2-php-net-distributions-php-5-6-26-tar-gz"><a href="#wget-http-cn2-php-net-distributions-php-5-6-26-tar-gz" class="headerlink" title="wget http://cn2.php.net/distributions/php-5.6.26.tar.gz"></a>wget <a href="http://cn2.php.net/distributions/php-5.6.26.tar.gz" target="_blank" rel="noopener">http://cn2.php.net/distributions/php-5.6.26.tar.gz</a></h1><h1 id="tar-xf-php-5-6-26-tar-gz"><a href="#tar-xf-php-5-6-26-tar-gz" class="headerlink" title="tar xf php-5.6.26.tar.gz"></a>tar xf php-5.6.26.tar.gz</h1><h1 id="cd-php-5-6-26"><a href="#cd-php-5-6-26" class="headerlink" title="cd php-5.6.26"></a>cd php-5.6.26</h1><p>./configure <br>–prefix=/usr/local/php <br>–with-config-file-path=/etc <br>–with-config-file-scan-dir=/etc/php.d <br>–sysconfdir=/etc <br>–enable-fpm \                        ;开启php-fpm FastCGI；如php运行为httpd模块则：–with-apxs2=/usr/local/apache/bin/apxs <br>–with-libxml-dir <br>–with-openssl <br>–without-sqlite3 <br>–without-pdo-sqlite <br>–with-zlib-dir <br>–with-pcre-dir <br>–with-mysql=mysqlnd <br>–with-mysqli=mysqlnd <br>–with-pdo-mysql=mysqlnd <br>–enable-mysqlnd <br>–enable-sockets \                    ;开启套接字方式支持<br>–enable-mbstring \                    ;支持多字符集<br>–with-zlib <br>–with-bz2 <br>–enable-zip <br>–with-gd <br>–with-png-dir <br>–with-jpeg-dir <br>–with-freetype-dir <br>–enable-maintainer-zts    \            ;支持httpd 的 worker、event模型<br>–with-mcrypt                        ;支持加密库</p>
<h1 id="make-amp-amp-make-install"><a href="#make-amp-amp-make-install" class="headerlink" title="make &amp;&amp; make install"></a>make &amp;&amp; make install</h1><blockquote>
<p>环境配置</p>
</blockquote>
<h1 id="mkdir-etc-php-d"><a href="#mkdir-etc-php-d" class="headerlink" title="mkdir /etc/php.d"></a>mkdir /etc/php.d</h1><h1 id="vim-etc-profile-d-php-fpm-sh"><a href="#vim-etc-profile-d-php-fpm-sh" class="headerlink" title="vim /etc/profile.d/php-fpm.sh"></a>vim /etc/profile.d/php-fpm.sh</h1><p>export PATH=$PATH:/usr/local/php/bin:/usr/local/php/sbin</p>
<h1 id="source-etc-profile-d-php-fpm-sh"><a href="#source-etc-profile-d-php-fpm-sh" class="headerlink" title="source /etc/profile.d/php-fpm.sh"></a>source /etc/profile.d/php-fpm.sh</h1><h1 id="vim-etc-ld-so-conf-d-php-fpm-conf"><a href="#vim-etc-ld-so-conf-d-php-fpm-conf" class="headerlink" title="vim /etc/ld.so.conf.d/php-fpm.conf"></a>vim /etc/ld.so.conf.d/php-fpm.conf</h1><p>/usr/local/php/lib</p>
<h1 id="ldconfig-1"><a href="#ldconfig-1" class="headerlink" title="ldconfig"></a>ldconfig</h1><h1 id="ldconfig-p-grep-php"><a href="#ldconfig-p-grep-php" class="headerlink" title="ldconfig -p | grep php"></a>ldconfig -p | grep php</h1><h1 id="vim-etc-man-config-1"><a href="#vim-etc-man-config-1" class="headerlink" title="vim /etc/man.config"></a>vim /etc/man.config</h1><p>MAN /usr/local/php/man</p>
<h1 id="ln-sv-usr-local-php-include-usr-include-php"><a href="#ln-sv-usr-local-php-include-usr-include-php" class="headerlink" title="ln -sv /usr/local/php/include /usr/include/php"></a>ln -sv /usr/local/php/include /usr/include/php</h1><h1 id="cp-php-ini-producation-etc-php-ini"><a href="#cp-php-ini-producation-etc-php-ini" class="headerlink" title="cp php.ini-producation /etc/php.ini"></a>cp php.ini-producation /etc/php.ini</h1><h1 id="cp-sapi-fpm-init-d-php-fpm-etc-init-d-php-fpm"><a href="#cp-sapi-fpm-init-d-php-fpm-etc-init-d-php-fpm" class="headerlink" title="cp sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm"></a>cp sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm</h1><h1 id="chmod-x-etc-init-d-php-fpm"><a href="#chmod-x-etc-init-d-php-fpm" class="headerlink" title="chmod +x /etc/init.d/php-fpm"></a>chmod +x /etc/init.d/php-fpm</h1><h1 id="chkconfig-–add-php-fpm"><a href="#chkconfig-–add-php-fpm" class="headerlink" title="chkconfig –add php-fpm"></a>chkconfig –add php-fpm</h1><h1 id="cd-usr-local-php"><a href="#cd-usr-local-php" class="headerlink" title="cd /usr/local/php/"></a>cd /usr/local/php/</h1><h1 id="cp-etc-php-fpm-conf-default-etc-php-fpm-conf"><a href="#cp-etc-php-fpm-conf-default-etc-php-fpm-conf" class="headerlink" title="cp etc/php-fpm.conf.default etc/php-fpm.conf"></a>cp etc/php-fpm.conf.default etc/php-fpm.conf</h1><h1 id="vim-etc-php-fpm-conf"><a href="#vim-etc-php-fpm-conf" class="headerlink" title="vim etc/php-fpm.conf"></a>vim etc/php-fpm.conf</h1><p>pm.max_children = 100<br>pm.start_servers = 8<br>pm.min_spare_servers = 2<br>pm.max_spare_servers = 5</p>
<h1 id="server-php-fpm-start"><a href="#server-php-fpm-start" class="headerlink" title="server php-fpm start"></a>server php-fpm start</h1><blockquote>
<p>文件配置</p>
</blockquote>
<h1 id="vim-www-html-index-php"><a href="#vim-www-html-index-php" class="headerlink" title="vim /www/html/index.php"></a>vim /www/html/index.php</h1><?php
    $conn = mysql_connect('localhost','root','dldkshja');
    if ($conn)
        echo access...;
    else
        echo failure...;
    mysql_close($conn);

    phpinfo();
?>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">### xcache</span><br><span class="line">----------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></div>
<h1 id="wget-http-xcache-lighttpd-net-pub-Releases-3-2-0-xcache-3-2-0-tar-gz"><a href="#wget-http-xcache-lighttpd-net-pub-Releases-3-2-0-xcache-3-2-0-tar-gz" class="headerlink" title="wget http://xcache.lighttpd.net/pub/Releases/3.2.0/xcache-3.2.0.tar.gz"></a>wget <a href="http://xcache.lighttpd.net/pub/Releases/3.2.0/xcache-3.2.0.tar.gz" target="_blank" rel="noopener">http://xcache.lighttpd.net/pub/Releases/3.2.0/xcache-3.2.0.tar.gz</a></h1><h1 id="tar-xf-xcache-3-2-0-tar-gz"><a href="#tar-xf-xcache-3-2-0-tar-gz" class="headerlink" title="tar xf xcache-3.2.0.tar.gz"></a>tar xf xcache-3.2.0.tar.gz</h1><h1 id="cd-xcache-3-2-0"><a href="#cd-xcache-3-2-0" class="headerlink" title="cd xcache-3.2.0"></a>cd xcache-3.2.0</h1><h1 id="phpize"><a href="#phpize" class="headerlink" title="phpize"></a>phpize</h1><h1 id="configure-–with-php-config-usr-local-php-bin-php-config-–enable-xcache"><a href="#configure-–with-php-config-usr-local-php-bin-php-config-–enable-xcache" class="headerlink" title="./configure –with-php-config=/usr/local/php/bin/php-config –enable-xcache"></a>./configure –with-php-config=/usr/local/php/bin/php-config –enable-xcache</h1><h1 id="cp-xcache-ini-etc-php-d"><a href="#cp-xcache-ini-etc-php-d" class="headerlink" title="cp xcache.ini /etc/php.d"></a>cp xcache.ini /etc/php.d</h1><h1 id="service-php-fpm-restart"><a href="#service-php-fpm-restart" class="headerlink" title="service php-fpm restart"></a>service php-fpm restart</h1><pre><code># &gt; LAMP 以上
</code></pre></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">l10ng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://l10ng.github.io/posts/LAMP/">https://l10ng.github.io/posts/LAMP/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://l10ng.github.io">l10ng's</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux    </a><a class="post-meta__tags" href="/tags/lamp/">lamp    </a><a class="post-meta__tags" href="/tags/centos/">centos    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/l10ng/image@1.0/cover_default2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-full"><a href="/posts/mimikatz-usage/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/l10ng/image@1.0/cover_default2.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/l10ng/image@1.0/404.gif'"><div class="label">上一篇</div><div class="prev_info"><span>mimikatz找回windows密碼的幾種常用方式</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'a5bf39a450eaf4f4de20',
  clientSecret: '3c64cac5a8dd3503d2d54d800ab2fc555b72c62e',
  repo: 'l10ng.github.io',
  owner: 'l10ng',
  admin: 'l10ng',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN',
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
}</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By l10ng</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-sun-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>